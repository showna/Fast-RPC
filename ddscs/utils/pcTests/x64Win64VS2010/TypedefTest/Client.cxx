/** 
 * Generated by DDSRPC                                                   *
 * Example client. Method params should be initialized before execution  *
 */

#include "TypedefTestProxy.h"
#include "TypedefTestRequestReplyPlugin.h"

int main()
{
    int domainId = 0;
    unsigned int timeoutInMillis = 4000;
    TypedefTestProxy *proxy = new TypedefTestProxy(domainId, timeoutInMillis);
    
    largo  l1 = 1;       
   
    largo  l2 ;    
    largo  getLargo_ret ;       
    eProsima::DDSRPC::ReturnMessage  getLargoRetValue ;        

    getLargoRetValue = proxy->getLargo(l1  ,l2  , getLargo_ret  );
    
    if(getLargoRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		l2 != 1 ||
		getLargo_ret != 1 ||
		l1 != 1)
	{
		printf("TEST FAILED<getLargo>\n");
		_exit(-1);
	}
        
        
        
    larguisimo  ll1 = 1;       
   
    larguisimo  ll2 ;    
    larguisimo  getLarguisimo_ret ;       
    eProsima::DDSRPC::ReturnMessage  getLarguisimoRetValue ;        

    getLarguisimoRetValue = proxy->getLarguisimo(ll1  ,ll2  , getLarguisimo_ret  );
    
	if(getLarguisimoRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		ll2 != 1 ||
		getLarguisimo_ret != 1 ||
		ll1 != 1)
	{
		printf("TEST FAILED<getLarguisimo>\n");
		_exit(-1);
	}
    
        
        
        
    DatosDef *d1 = DatosDefPluginSupport_create_data();       
   
    DatosDef *d2 = DatosDefPluginSupport_create_data();    
    DatosDef *getDatosDef_ret = DatosDefPluginSupport_create_data();       
    eProsima::DDSRPC::ReturnMessage  getDatosDefRetValue ;        

    d1->count = 1;
    d1->message = DDS::String_dup("PRUEBA");;

    getDatosDefRetValue = proxy->getDatosDef(d1  ,d2  , getDatosDef_ret  );
    
	if(getDatosDefRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		d2->count != 1 || strcmp(d2->message, "PRUEBA") != 0 ||
		getDatosDef_ret->count != 1 || strcmp(getDatosDef_ret->message, "PRUEBA") != 0 ||
		d1->count != 1 || strcmp(d1->message, "PRUEBA") != 0)
	{
		printf("TEST FAILED<getDatosDef>\n");
		_exit(-1);
	}
    
    DatosDefPluginSupport_destroy_data(d1);    
    DatosDefPluginSupport_destroy_data(d2);    
    DatosDefPluginSupport_destroy_data(getDatosDef_ret);    
    DatosDefondo *dd1 = DatosDefondoPluginSupport_create_data();       
   
    DatosDefondo *dd2 = DatosDefondoPluginSupport_create_data();    
    DatosDefondo *getDatosDefondo_ret = DatosDefondoPluginSupport_create_data();       
    eProsima::DDSRPC::ReturnMessage  getDatosDefondoRetValue ;        

    dd1->count = 1;
    dd1->message = DDS::String_dup("PRUEBA");

    getDatosDefondoRetValue = proxy->getDatosDefondo(dd1  ,dd2  , getDatosDefondo_ret  );
    
	if(getDatosDefondoRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		dd2->count != 1 || strcmp(dd2->message, "PRUEBA") != 0 ||
		getDatosDefondo_ret->count != 1 || strcmp(getDatosDefondo_ret->message, "PRUEBA") != 0 ||
		dd1->count != 1 || strcmp(dd1->message, "PRUEBA") != 0)
	{
		printf("TEST FAILED<getDatosDef>\n");
		_exit(-1);
	}
    
    DatosDefondoPluginSupport_destroy_data(dd1);    
    DatosDefondoPluginSupport_destroy_data(dd2);    
    DatosDefondoPluginSupport_destroy_data(getDatosDefondo_ret);    
    cadena  c1  = DDS::String_dup("PRUEBA");       
   
    cadena  c2  = NULL;    
    cadena  getCadena_ret  = NULL;       
    eProsima::DDSRPC::ReturnMessage  getCadenaRetValue ;        

    getCadenaRetValue = proxy->getCadena(c1  ,c2  , getCadena_ret  );
    
	if(getCadenaRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		strcmp(c2, "PRUEBA") != 0 ||
		strcmp(getCadena_ret, "PRUEBA") != 0 ||
		strcmp(c1, "PRUEBA") != 0)
	{
		printf("TEST FAILED<getCadena>\n");
		_exit(-1);
	}
    
    if(c1 != NULL) DDS::String_free(c1);    
    if(c2 != NULL) DDS::String_free(c2);    
    if(getCadena_ret != NULL) DDS::String_free(getCadena_ret);    
    correa  cc1  = DDS::String_dup("PRUEBA");       
   
    correa  cc2  = NULL;    
    correa  getCorrea_ret  = NULL;       
    eProsima::DDSRPC::ReturnMessage  getCorreaRetValue ;        

    getCorreaRetValue = proxy->getCorrea(cc1  ,cc2  , getCorrea_ret  );
    
	if(getCorreaRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		strcmp(cc2, "PRUEBA") != 0 ||
		strcmp(getCorrea_ret, "PRUEBA") != 0 ||
		strcmp(cc1, "PRUEBA") != 0)
	{
		printf("TEST FAILED<getCadena>\n");
		_exit(-1);
	}
    
    if(cc1 != NULL) DDS::String_free(cc1);    
    if(cc2 != NULL) DDS::String_free(cc2);    
    if(getCorrea_ret != NULL) DDS::String_free(getCorrea_ret); 

	printf("TEST SUCCESFULLY\n");

   delete(proxy);
   
   _exit(0);
}
