/** 
 * Generated by DDSRPC                                                   *
 * Example client. Method params should be initialized before execution  *
 */

#include "EnumYStringTestProxy.h"
#include "EnumYStringTestRequestReplyPlugin.h"

int main()
{
    int domainId = 0;
    unsigned int timeoutInMillis = 4000;
    EnumYStringTestProxy *proxy = new EnumYStringTestProxy(domainId, timeoutInMillis);
    
    Valores  v1 = VALOR1;       
    Valores  v2 = VALOR2;       
    Valores  v3 ;    
    Valores  getEnum_ret ;       
    eProsima::DDSRPC::ReturnMessage  getEnumRetValue ;        

    getEnumRetValue = proxy->getEnum(v1  ,v2  ,v3  , getEnum_ret  );
    
    if(getEnumRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		v3 != VALOR2 ||
		getEnum_ret != VALOR1 ||
		v2 != VALOR1 ||
		v1 != VALOR1)
	{
		printf("TEST FAILED<getEnum>\n");
		_exit(-1);
	}       
        
    char*  s1  = DDS::String_dup("PRUEBA");       
    char*  s2  = DDS::String_dup("PRUEBA2");       
    char*  s3  = NULL;    
    char*  getString_ret  = NULL;       
    eProsima::DDSRPC::ReturnMessage  getStringRetValue ;        

    getStringRetValue = proxy->getString(s1  ,s2  ,s3  , getString_ret  );
    
	if(getStringRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		strcmp(s3, "PRUEBA2") != 0 ||
		strcmp(getString_ret, "PRUEBA") != 0 ||
		strcmp(s2, "PRUEBAPRUEBA2") != 0 ||
		strcmp(s1, "PRUEBA") != 0)
	{
		printf("TEST FAILED<getString>\n");
		_exit(-1);
	}       
    
    if(s1 != NULL) DDS::String_free(s1);    
    if(s2 != NULL) DDS::String_free(s2);    
    if(s3 != NULL) DDS::String_free(s3);    
    if(getString_ret != NULL) DDS::String_free(getString_ret);    
    char*  sb1  = DDS::String_dup("PRUEBA");       

    char*  sb2  = DDS::String_dup("PRUEBA2");       
    char*  sb3  = NULL;    
    char*  getStringBounded_ret  = NULL;       
    eProsima::DDSRPC::ReturnMessage  getStringBoundedRetValue ;        

    getStringBoundedRetValue = proxy->getStringBounded(sb1  ,sb2  ,sb3  , getStringBounded_ret  );
    
	if(getStringBoundedRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		strcmp(sb3, "PRUEBA2") != 0 ||
		strcmp(getStringBounded_ret, "PRUEBA") != 0 ||
		strcmp(sb2, "PRUEBAPRUEBA2") != 0 ||
		strcmp(sb1, "PRUEBA") != 0)
	{
		printf("TEST FAILED<getStringBounded>\n");
		_exit(-1);
	}    
    
    if(sb1 != NULL) DDS::String_free(sb1);    
    if(sb2 != NULL) DDS::String_free(sb2);    
    if(sb3 != NULL) DDS::String_free(sb3);    
    if(getStringBounded_ret != NULL) DDS::String_free(getStringBounded_ret);

	printf("TEST SUCCESFULLY\n");

   delete(proxy);

   _exit(0);
}
