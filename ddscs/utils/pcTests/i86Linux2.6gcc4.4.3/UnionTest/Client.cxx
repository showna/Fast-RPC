/** 
 * Generated by DDSRPC                                                   *
 * Example client. Method params should be initialized before execution  *
 */

#include "UnionTestProxy.h"
#include "UnionTestRequestReplyPlugin.h"

int main()
{
    int domainId = 0;
    unsigned int timeoutInMillis = 4000;
    UnionTestProxy *proxy = new UnionTestProxy(domainId, timeoutInMillis);
    char buffer[30];
    
    Empleado *em1 = EmpleadoPluginSupport_create_data();       
    Empleado *em2 = EmpleadoPluginSupport_create_data();       
    Empleado *em3 = EmpleadoPluginSupport_create_data();    
    Empleado *getEmpleado_ret = EmpleadoPluginSupport_create_data();       
    eProsima::DDSRPC::ReturnMessage  getEmpleadoRetValue ;        

    em1->_d = 1;
    em1->_u.id = 1;
    em2->_d = 2;
    em2->_u.name = DDS::String_dup("PRUEBA");

    getEmpleadoRetValue = proxy->getEmpleado(em1  ,em2  ,em3  , getEmpleado_ret  );

	if(getEmpleadoRetValue != eProsima::DDSRPC::OPERATION_SUCCESSFUL ||
		em3->_d != 2 || strcmp(em3->_u.name, "PRUEBA") != 0 ||
		getEmpleado_ret->_d != 1 || getEmpleado_ret->_u.id != 1 ||
		em2->_d != 1 || em2->_u.id != 1 ||
		em1->_d != 1 || em1->_u.id != 1)
	{
		printf("TEST FAILED<getEmpleado>\n");
		_exit(-1);
	}
    
    EmpleadoPluginSupport_destroy_data(em1);    
    EmpleadoPluginSupport_destroy_data(em2);    
    EmpleadoPluginSupport_destroy_data(em3);    
    EmpleadoPluginSupport_destroy_data(getEmpleado_ret);   

	printf("TEST SUCCESFULLY\n");

   delete(proxy);

   _exit(0);
}
